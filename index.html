<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Score Junken</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- ゲームロジック -->
  <script type="module" src="ScoreJunken.js"></script>

  <h1>スコアジャンケン</h1>

  
  <div id="google-auth-container">
    <button id="google-logout">ログアウト</button>
    <button id="google-login">Googleでログイン</button>
    <button id="anon-login">匿名ログイン</button>
  </div>

  <table id="rule-text" style="margin:20px auto; border-collapse: collapse; text-align:center;">
    <caption>ラウンド数15 [右手アクション定義]</caption>
    <thead>
      <tr>
        <th>数字</th>
        <th>名前</th>
        <th>勝</th>
        <th>あいこ</th>
        <th>負</th>
        <th>役割</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>0</td><td>ブロック</td><td>-10*</td><td>-10</td><td>-10</td><td>逃げ／準備</td></tr>
      <tr><td>1</td><td>ライト</td><td>+10</td><td>0</td><td>0</td><td>安定</td></tr>
      <tr><td>2</td><td>ドライブ</td><td>+25</td><td>0</td><td>-10</td><td>攻め</td></tr>
      <tr><td>3</td><td>カウンター</td><td>?</td><td>?</td><td>?</td><td>読み</td></tr>
      <tr><td>4</td><td>トリック</td><td>0</td><td>+25</td><td>-20</td><td>攪乱</td></tr>
      <tr><td>5</td><td>リバーサル</td><td>+50</td><td>0</td><td>-50</td><td>逆転</td></tr>
    </tbody>
  </table>

  <p>※ 特殊ルール<br>
  ・?相手がカウンターの場合、相手の得点と自分の得点を反転させて、自分の得点は常に0<br>
  ・*相手がブロックの場合、自分の得点は常に 0<br>
  ・*ブロックは1回目：-10,2回目：-20,3回目：-30,4回目以降：使用不可<br>
  ・残り3ラウンドでは：ライト 勝+15 / トリック あいこ+35<br>
  ・リバーサルは1試合1回のみ
  </p>

  <button id="toggle-text">表示/非表示切り替え</button>

  <!-- ゲーム画面の左下に固定表示 -->
  <div id="rate-display" style="
    position: fixed;
    left: 10px;
    bottom: 10px;
    background: rgba(0,0,0,0.6);
    color: white;
    padding: 8px 12px;
    border-radius: 8px;
    font-family: sans-serif;
    font-size: 14px;
    z-index: 1000;
  ">
    レート: <span id="my-rate">1500</span>
    <span id="opp-rate-container" style="display:none;">
      | 相手: <span id="opp-rate">1500</span>
    </span>
  </div>

  <div id="start-screen" style="display: flex; justify-content: center; gap: 20px;">
    <!-- CPU対戦 -->
    <div style="text-align: center;">
      <div>CPU対戦</div> <!-- ボタンの上の文字 -->
      <button id="cpu-btn">CPU対戦</button>
    </div>

    <!-- オンライン対戦 -->
    <div style="text-align: center; display: flex; flex-direction: column; align-items: center; gap: 10px;">
      <div>オンライン対戦</div>
        <button id="online-btn-room001">room001</button>
        <button id="online-btn-room002">room002</button>
        <button id="online-btn-room003">room003</button>
      </div>
  </div>

    <div id="game-area" style="display: none;">

      <!-- 手の選択 UI（上部） -->
      <div class="hand-area" style="display: flex; justify-content: center; gap: 50px; margin-top: 20px;">
        
        <!-- 左手 -->
        <div class="hand left">
          <h2>左手</h2>
          <div class="hands">
            <div class="hand-item">
              <img src="img/gu.png" alt="グー">
              <button data-hand="0" onclick="chooseHand('left',0)">グー</button>
            </div>
            <div class="hand-item">
              <img src="img/choki.png" alt="チョキ">
              <button data-hand="1" onclick="chooseHand('left',1)">チョキ</button>
            </div>
            <div class="hand-item">
              <img src="img/pa.png" alt="パー">
              <button data-hand="2" onclick="chooseHand('left',2)">パー</button>
            </div>
          </div>
        </div>

        <!-- 右手 -->
        <div class="hand right">
          <h2>右手</h2>
          <div class="right-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px 24px; justify-items: center;">
            <div class="hand-item"><img src="img/block.png" alt="ブロック"><button data-right="0" onclick="chooseHand('right',0)">ブロック</button></div>
            <div class="hand-item"><img src="img/counter.png" alt="カウンター"><button data-right="3" onclick="chooseHand('right',3)">カウンター</button></div>
            <div class="hand-item"><img src="img/light.png" alt="ライト"><button data-right="1" onclick="chooseHand('right',1)">ライト</button></div>
            <div class="hand-item"><img src="img/trick.png" alt="トリック"><button data-right="4" onclick="chooseHand('right',4)">トリック</button></div>
            <div class="hand-item"><img src="img/drive.png" alt="ドライブ"><button data-right="2" onclick="chooseHand('right',2)">ドライブ</button></div>
            <div class="hand-item"><img src="img/reversal.png" alt="リバーサル"><button data-right="5" onclick="chooseHand('right',5)">リバーサル</button></div>
          </div>
        </div>

      </div>

      <!-- スコアとログ（画面下） -->
      <div id="score-log" style="position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.6); color: white; padding: 10px 20px; border-radius: 10px; font-family: sans-serif; text-align: center; z-index: 1000;">
        <div class="score">
          ラウンド: <span id="round">1</span> / 15<br>
          あなた: <span id="pScore">0</span> / 相手: <span id="cScore">0</span>
        </div>
        <div class="log" id="log">左手と右手を選んでください</div>
      </div>

      <button id="return-start">スタート画面に戻る</button>
    </div>
  </div>
</body>
</html>