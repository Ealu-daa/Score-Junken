<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Score Junken</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- ゲームロジック -->
  <script type="module" src="ScoreJunken.js"></script>

  <h1>スコアジャンケン</h1>

  <p id="rule-text">
  ラウンド数15
  [右手アクション定義]

  数字 | 名前         | 勝   | あいこ | 負   | 役割
  ------------------------------------------------
  0   | ブロック     | -10*  | -10   | -10   | 逃げ／準備
  1   | ライト       | +10   |  0    |  0    | 安定
  2   | ドライブ     | +25   |  0    | -10   | 攻め
  3   | カウンター   |  ?    |   ?   |   ?   | 読み
  4   | トリック     |  0    | +25   | -20   | 攪乱
  5   | リバーサル   | +50   |  0    | -50   | 逆転

  ※ 特殊ルール
  ・?相手がカウンターの場合、相手の得点と自分の得点を反転させて、自分の得点は常に0
  ・*相手がブロックの場合、自分の得点は常に 0
  ・*ブロックは1回目：-10,2回目：-20,3回目：-30,4回目以降：使用不可
  ・残り3ラウンドでは：
    ・ライト 勝+15
    ・トリック あいこ+35
  ・リバーサルは1試合1回のみ
  </p>

  <button id="toggle-text">ルール表示/非表示切り替え</button>

  <button id="return-start">スタート画面に戻る</button>

  <!-- ゲーム画面の左下に固定表示 -->
    <div id="rate-display">
    レート: <span id="my-rate">1500</span>
    <span id="name">名無し</span>
    </span>
  </div>

  <div id="start-screen" style="display: flex; justify-content: center; gap: 20px;">
    <!-- CPU対戦 -->
    <div style="text-align: center;">
      <div>CPU対戦</div> <!-- ボタンの上の文字 -->
      <button id="cpu-btn">CPU対戦</button>
    </div>

    <!-- オンライン対戦 -->
    <div style="text-align: center; display: flex; flex-direction: column; align-items: center; gap: 10px;">
      <div>オンライン対戦</div>
      <button id="online-btn-room001">room001</button>
      <button id="online-btn-room002">room002</button>
      <button id="online-btn-room003">room003</button>
    </div>

    
  </div>

  <div id="google-auth-container">
    <button id="google-logout">ログアウト</button>
    <button id="google-login">Googleでログイン</button>
    <button id="anon-login">匿名ログイン</button>
    <input type="text" id="nameInput" placeholder="名前を入力">
    <button id="updateNameBtn">更新</button>
  </div>

  <div id="game-area" style="display: none;">

    <!-- 手の選択 UI（上部） -->
    <div class="hand-area" style="display: flex; justify-content: center; gap: 50px; margin-top: 20px;">
      
      <!-- 左手 -->
      <div class="hand left">
        <h2>左手</h2>
        <div class="hands">
          <div class="hand-item">
            <img src="img/gu.png" alt="グー">
            <button data-hand="0" onclick="chooseHand('left',0)">グー</button>
          </div>
          <div class="hand-item">
            <img src="img/choki.png" alt="チョキ">
            <button data-hand="1" onclick="chooseHand('left',1)">チョキ</button>
          </div>
          <div class="hand-item">
            <img src="img/pa.png" alt="パー">
            <button data-hand="2" onclick="chooseHand('left',2)">パー</button>
          </div>
        </div>
      </div>

      <!-- 右手 -->
      <div class="hand right">
        <h2>右手</h2>
        <div class="hands">
          <div class="right-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px 24px; justify-items: center;">
            <div class="hand-item"><img src="img/block.png" alt="ブロック"><button data-right="0" onclick="chooseHand('right',0)">ブロック</button></div>
            <div class="hand-item"><img src="img/counter.png" alt="カウンター"><button data-right="3" onclick="chooseHand('right',3)">カウンター</button></div>
            <div class="hand-item"><img src="img/light.png" alt="ライト"><button data-right="1" onclick="chooseHand('right',1)">ライト</button></div>
            <div class="hand-item"><img src="img/trick.png" alt="トリック"><button data-right="4" onclick="chooseHand('right',4)">トリック</button></div>
            <div class="hand-item"><img src="img/drive.png" alt="ドライブ"><button data-right="2" onclick="chooseHand('right',2)">ドライブ</button></div>
            <div class="hand-item"><img src="img/reversal.png" alt="リバーサル"><button data-right="5" onclick="chooseHand('right',5)">リバーサル</button></div>
          </div>
        </div>
      </div>

    </div>

    <button onclick="chooseHand('confirm',0)">確定</button>

    <!-- スコアとログ（画面下） -->
    <div id="score-log">
      <div class="score">
        ラウンド: <span id="round">1</span> / 15<br>
        あなた: <span id="pScore">0</span> / 相手: <span id="cScore">0</span>
      </div>
      <div class="log" id="log">roomに参加しました</div>
    </div>
  </div>
</body>
</html>